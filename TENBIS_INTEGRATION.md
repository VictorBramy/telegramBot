# 🍔 10Bis Vouchers Integration

הבוט כולל אינטגרציה מלאה עם מערכת 10Bis לצפייה בשוברים פעילים.

## ✨ תכונות

- 🔐 התחברות מאובטחת עם אימות דו-שלבי (OTP)
- 🎫 הצגת כל השוברים הפעילים
- 💰 חישוב סכום כולל של שוברים
- 📸 הצגת ברקודים לסריקה
- 💾 שמירת session למשתמשים (אין צורך להתחבר כל פעם)

## 📋 פקודות

### `/tenbis_login <email>`
התחברות לחשבון 10Bis.

**שימוש:**
```
/tenbis_login user@example.com
```

לאחר שליחת הפקודה, הבוט ישלח קוד אימות לאימייל שלך.
פשוט שלח את הקוד בהודעה רגילה והבוט יאמת אותך.

### `/tenbis_vouchers [חודשים]`
הצגת כל השוברים הפעילים.

**שימוש:**
```
/tenbis_vouchers           # סרוק 12 חודשים אחורה (ברירת מחדל)
/tenbis_vouchers 6         # סרוק 6 חודשים אחורה
/tenbis_vouchers 24        # סרוק 24 חודשים אחורה
```

הבוט יציג:
- מספר השוברים הפעילים
- סכום כולל
- פירוט מלא של כל שובר (חנות, תאריך, סכום, תוקף)
- תמונות ברקוד לסריקה

### `/tenbis_logout`
התנתקות מהחשבון וניקוי session.

**שימוש:**
```
/tenbis_logout
```

## 🔒 אבטחה

- כל משתמש שומר session נפרד
- סיסמאות לא נשמרות
- רק tokens זמניים נשמרים
- התנתקות מוחקת את כל הנתונים

## 🎯 דוגמת שימוש

```
משתמש: /tenbis_login user@example.com
בוט: קוד אימות נשלח לאימייל שלך 📧
     שלח לי את הקוד כדי להמשיך.

משתמש: 123456
בוט: ✅ אימות הצליח! עכשיו תוכל לראות את השוברים שלך.

משתמש: /tenbis_vouchers
בוט: 🔍 מחפש שוברים פעילים... אנא המתן...
     ✅ נמצאו 5 שוברים פעילים!
     💰 סה"כ: 250 ₪
     
     🎫 שובר #1
     💰 50 ₪
     🏪 מסעדת הבורגר
     📅 תאריך הזמנה: 15.12.24
     ⏰ תוקף: 31.01.25
     🔢 ברקוד: 1234-5678-9012-3456
     
     [תמונת ברקוד]
     ...
```

## 🛠️ מודול טכני

הפונקציונליות ממומשת בשני קבצים:

### `tenbis_handler.py`
מכיל את המחלקה `TenbisHandler` שמטפלת בכל התקשורת עם API של 10Bis:
- אימות משתמש (OTP)
- שליפת רשימת הזמנות
- קבלת פרטי ברקודים
- ניהול sessions

### `bot.py`
מכיל את הפקודות של הבוט:
- `tenbis_login_command` - טיפול בהתחברות
- `tenbis_vouchers_command` - הצגת שוברים
- `tenbis_logout_command` - התנתקות
- `handle_message` - קבלת OTP

## 📦 תלויות

הפונקציונליות דורשת:
- `requests` - לתקשורת עם API
- `urllib3` - לטיפול ב-SSL warnings
- `pickle` - לשמירת sessions

כל התלויות כבר מוגדרות ב-`requirements.txt`.

## 🚀 העלאה לענן

הפיצ'ר עובד מיד ב-Railway/Cloud deployment ללא צורך בהגדרות נוספות.
